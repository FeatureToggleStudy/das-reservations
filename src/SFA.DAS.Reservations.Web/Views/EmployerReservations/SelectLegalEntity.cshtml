@using System.Text
@using Microsoft.AspNetCore.Mvc.ModelBinding
@using SFA.DAS.Reservations.Web.Infrastructure
@model SelectLegalEntityViewModel
@{
    ViewData["Title"] = "Reservations - Select Organisation";
}
<div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">

        @if (!ViewData.ModelState.IsValid)
        {
            <div class="govuk-error-summary" aria-labelledby="error-summary-title" role="alert" tabindex="-1" data-module="error-summary">
                <h2 class="govuk-error-summary__title" id="error-summary-title">
                    There is a problem
                </h2>
                <div class="govuk-error-summary__body">
                    <ul class="govuk-list govuk-error-summary__list">
                        @{
                            var errorStringBuilder = new StringBuilder();
                            var errorCount = ViewData.ModelState.ErrorCount;
                            var loopCount = 1;
                            foreach (var error in ViewData.ModelState)
                            {
                                if (error.Value.ValidationState == ModelValidationState.Invalid)
                                {
                                    errorStringBuilder.Append($"<li><a href=\"#{error.Key}\">TODO: what is this error message?</a></li>");
                                    if (loopCount == errorCount - 1)
                                    {
                                        errorStringBuilder.Append(" and ");
                                    }
                                    else if (loopCount != errorCount)
                                    {
                                        errorStringBuilder.Append(", ");
                                    }

                                    loopCount++;
                                }
                            }
                        }
                        @Html.Raw(errorStringBuilder.ToString())
                    </ul>
                </div>
            </div>
        }

        <h1 class="govuk-heading-xl">Choose organisation</h1>

        <form method="post" asp-route="@RouteNames.EmployerSelectCourse" class="validate-auto-complete">


            <div class="govuk-form-group">
                <span id="choose-apprenticeship-hint" class="govuk-hint">
                    Which organisation is named on the contract with the training provider for the apprentices you'd like to add?
                </span>
            </div>
            <details>What is a contract for services?</details>
            <button type="submit" class="govuk-button">
                Save and continue
            </button>
        </form>
    </div>
</div>